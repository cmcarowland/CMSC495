<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>GoldenHour</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='resources/Sunapp.png') }}" />
  </head>
  <body>
    <header class="site-header">
      <img src="{{ url_for('static', filename='resources/Sunapp.png') }}" alt="Logo" class="logo" />
      <h1>GoldenHour</h1>
      <p class="tagline">Plan your outdoor activities by sunrise, sunset, and weather (maybe)</p>
    </header>

    <main class="container">
      <section class="hero">
        <p>Enter a latitude/longitude to get sunrise/sunset times and weather forecasts.</p>
        <form action='/submitCoord' id="locForm" method="post" class="form-input-group">
          <label for="latitude">Latitude</label>
          <input id="latitude" name="latitude" type="text" placeholder="e.g. 38.9072" />
          <label for="longitude">Longitude</label>
          <input id="longitude" name="longitude" type="text" placeholder="e.g. -77.0369" />
          <button type="submit" class="form-button">Lookup</button>
        </form>
        <br>
        <button type="button" id="getLocationBtn">Get geolocation</button>
      </section>
      <br>
      <section class="hero">
        <p>Enter a city and country</p>
        <form action='/submitCity' id="cityForm" method="post" class="form-input-group">
          <label for="city">City</label>
          <input id="city" name="city" type="text" placeholder="e.g. Buffalo" />
          <label for="state">State</label>
          <input id="state" name="state" type="text" placeholder="e.g. NY, Not required for non-USA" />
          <label for="country">Country</label>
          <input id="country" name="country" type="text" placeholder="e.g. USA" />
          <button type="submit" class="form-button">Lookup</button>
        </form>
      </section>
    </main>

    <footer>
      <small>Â© 2025 GoldenHour for CMSC495</small>
    </footer>

    <script>
      function showPosition(position) {
        document.getElementById("latitude").value = position.coords.latitude;
        document.getElementById("longitude").value = position.coords.longitude;
      }

      function showError(error) {
        switch(error.code) {
          case error.PERMISSION_DENIED:
              alert("User denied the request for Geolocation.");
              break;
          case error.POSITION_UNAVAILABLE:
              alert("Location information is unavailable.");
              break;
          case error.TIMEOUT:
              alert("The request to get user location timed out.");
              break;
          case error.UNKNOWN_ERROR:
              alert("An unknown error occurred.");
              break;
        }
      }

      document.getElementById('getLocationBtn').onclick = function() {
        if (navigator.geolocation) {
            console.log("Geolocation is supported by this browser.");
            navigator.geolocation.getCurrentPosition(showPosition, showError);
          } else {
            console.log("Geolocation is not supported by this browser.");
            alert("Geolocation is not supported by this browser.");
          }
      };
    </script>
  </body>
</html>
